<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light">
    <title>ËÖéÂ•ΩÂ∫∑ - ÂÅ•Â∫∑Êï∏Êìö</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/additional-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .health-data-container {
            padding: 20px;
            padding-bottom: 100px;
        }
        
        .page-header {
            margin-bottom: 24px;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--ios-text-primary);
        }
        
        .page-subtitle {
            font-size: 16px;
            color: var(--ios-text-secondary);
            line-height: 1.4;
        }
        
        .visual-aid-tools {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 16px;
        }
        
        .visual-aid-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 22px;
            background-color: var(--ios-gray6);
            color: var(--ios-text-primary);
            margin-left: 10px;
            font-size: 20px;
        }
        
        .data-card {
            background-color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--ios-text-primary);
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 12px;
            color: var(--ios-primary);
            font-size: 22px;
        }
        
        .add-btn {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background-color: var(--ios-primary-light);
            color: var(--ios-primary);
            border-radius: 20px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .add-btn i {
            margin-right: 6px;
        }
        
        .input-group {
            margin-bottom: 16px;
        }
        
        .input-label {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--ios-text-primary);
        }
        
        .input-field {
            width: 100%;
            padding: 14px 16px;
            font-size: 16px;
            border: 1px solid var(--ios-gray5);
            border-radius: 12px;
            background-color: var(--ios-gray6);
            color: var(--ios-text-primary);
            margin-bottom: 8px;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--ios-primary);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
        
        .input-hint {
            font-size: 14px;
            color: var(--ios-text-tertiary);
        }
        
        .dual-input {
            display: flex;
            gap: 12px;
        }
        
        .dual-input .input-group {
            flex: 1;
        }
        
        .save-btn {
            width: 100%;
            padding: 16px;
            font-size: 18px;
            font-weight: 600;
            color: white;
            background-color: var(--ios-primary);
            border: none;
            border-radius: 12px;
            margin-top: 16px;
        }
        
        .data-history {
            margin-top: 20px;
        }
        
        .history-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--ios-text-primary);
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .history-table th {
            padding: 12px 8px;
            font-size: 16px;
            text-align: left;
            border-bottom: 2px solid var(--ios-gray5);
            color: var(--ios-text-secondary);
            font-weight: 600;
        }
        
        .history-table td {
            padding: 14px 8px;
            font-size: 16px;
            border-bottom: 1px solid var(--ios-gray6);
            color: var(--ios-text-primary);
        }
        
        .chart-container {
            margin-top: 20px;
            height: 250px;
            position: relative;
        }
        
        .chart-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--ios-gray6);
            border-radius: 12px;
            color: var(--ios-text-secondary);
            font-style: italic;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            background-color: var(--ios-gray6);
            border-radius: 12px;
            padding: 4px;
        }
        
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 12px;
            font-size: 16px;
            font-weight: 500;
            color: var(--ios-text-secondary);
            border-radius: 10px;
        }
        
        .tab-item.active {
            background-color: white;
            color: var(--ios-primary);
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="iphone-container">
        <!-- ÁãÄÊÖãÊ¨Ñ -->
        <div class="status-bar">
            <div id="status-time" class="status-time">9:41</div>
            <div class="status-icons">
                <div class="status-icon">üì∂</div>
                <div class="status-icon">üìä</div>
                <div class="status-icon">üîã</div>
            </div>
        </div>
        
        <!-- Â∞éËà™Ê¨Ñ -->
        <div class="nav-bar">
            <div class="nav-back" onclick="history.back()">ËøîÂõû</div>
            <div class="nav-title">ÂÅ•Â∫∑Êï∏Êìö</div>
            <div></div>
        </div>
        
        <!-- ÊªæÂãïÂÖßÂÆπÂçÄ -->
        <div class="content-container">
            <div class="health-data-container">
                <!-- Ë¶ñÂäõËºîÂä©Â∑•ÂÖ∑ -->
                <div class="visual-aid-tools">
                    <div class="visual-aid-btn" id="increase-text">
                        <i class="fas fa-text-height"></i>
                    </div>
                    <div class="visual-aid-btn" id="high-contrast">
                        <i class="fas fa-adjust"></i>
                    </div>
                </div>
                
                <div class="page-header">
                    <div class="page-title">ÂÅ•Â∫∑Êï∏Êìö</div>
                    <p class="page-subtitle">Ë®òÈåÑ‰∏¶ËøΩËπ§ÊÇ®ÁöÑÂÅ•Â∫∑ÊåáÊ®ôÔºåÂπ´Âä©ÊÇ®Êõ¥Â•ΩÂú∞ÁÆ°ÁêÜËÖéËáüÂÅ•Â∫∑</p>
                </div>
                
                <div class="tab-container">
                    <div class="tab-item active" data-tab="vitals">ÁîüÁêÜÊåáÊ®ô</div>
                    <div class="tab-item" data-tab="blood">Ë°ÄÊ∂≤Ê™¢Ê∏¨</div>
                    <div class="tab-item" data-tab="dialysis">ÈÄèÊûêÊï∏Êìö</div>
                </div>
                
                <!-- ÁîüÁêÜÊåáÊ®ôÈ†ÅÁ±§ -->
                <div id="vitals-tab" class="tab-content active">
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-heartbeat"></i>
                                Ë®òÈåÑÁîüÁêÜÊåáÊ®ô
                            </div>
                            <div class="add-btn" id="add-vitals-btn">
                                <i class="fas fa-plus"></i> Êñ∞Â¢û
                            </div>
                        </div>
                        
                        <form id="vitals-form">
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">Êî∂Á∏ÆÂ£ì (mmHg)</div>
                                    <input type="number" class="input-field" id="systolic" placeholder="‰æãÂ¶ÇÔºö120">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">ËàíÂºµÂ£ì (mmHg)</div>
                                    <input type="number" class="input-field" id="diastolic" placeholder="‰æãÂ¶ÇÔºö80">
                                </div>
                            </div>
                            
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">ÂøÉÁéá (bpm)</div>
                                    <input type="number" class="input-field" id="heart-rate" placeholder="‰æãÂ¶ÇÔºö75">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">È´îÈáç (kg)</div>
                                    <input type="number" step="0.1" class="input-field" id="weight" placeholder="‰æãÂ¶ÇÔºö70.5">
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <div class="input-label">Êó•ÊúüÂíåÊôÇÈñì</div>
                                <input type="datetime-local" class="input-field" id="vitals-datetime">
                                <div class="input-hint">Ëã•Êú™Â°´ÂØ´ÔºåÈ†êË®≠‰ΩøÁî®Áï∂ÂâçÊôÇÈñì</div>
                            </div>
                            
                            <button type="button" class="save-btn" id="save-vitals-btn">ÂÑ≤Â≠òË≥áÊñô</button>
                        </form>
                        
                        <div class="data-history">
                            <div class="history-title">Ê≠∑Âè≤Ë®òÈåÑ</div>
                            <div class="chart-container">
                                <div class="chart-placeholder">
                                    Ë°ÄÂ£ìË∂®Âã¢Âúñ (Ê≠§ËôïÁÇ∫Á§∫ÊÑèÔºåÂØ¶ÈöõÊáâÁî®Â∞áÈ°ØÁ§∫ÂúñË°®)
                                </div>
                            </div>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Êó•Êúü</th>
                                        <th>Ë°ÄÂ£ì</th>
                                        <th>ÂøÉÁéá</th>
                                        <th>È´îÈáç</th>
                                    </tr>
                                </thead>
                                <tbody id="vitals-history">
                                    <tr>
                                        <td>2023/03/25 08:30</td>
                                        <td>125/85 mmHg</td>
                                        <td>78 bpm</td>
                                        <td>79.2 kg</td>
                                    </tr>
                                    <tr>
                                        <td>2023/03/24 08:15</td>
                                        <td>130/82 mmHg</td>
                                        <td>75 bpm</td>
                                        <td>79.4 kg</td>
                                    </tr>
                                    <tr>
                                        <td>2023/03/23 08:45</td>
                                        <td>128/80 mmHg</td>
                                        <td>82 bpm</td>
                                        <td>79.8 kg</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Ë°ÄÊ∂≤Ê™¢Ê∏¨È†ÅÁ±§ -->
                <div id="blood-tab" class="tab-content">
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-vial"></i>
                                Ë°ÄÊ∂≤Ê™¢Ê∏¨Êï∏Êìö
                            </div>
                            <div class="add-btn" id="add-blood-btn">
                                <i class="fas fa-plus"></i> Êñ∞Â¢û
                            </div>
                        </div>
                        
                        <form id="blood-form">
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">Ë°ÄÈâÄ (mEq/L)</div>
                                    <input type="number" step="0.1" class="input-field" id="potassium" placeholder="‰æãÂ¶ÇÔºö4.5">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">Ë°ÄÁ£∑ (mg/dL)</div>
                                    <input type="number" step="0.1" class="input-field" id="phosphorus" placeholder="‰æãÂ¶ÇÔºö4.0">
                                </div>
                            </div>
                            
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">Ë°ÄÈà£ (mg/dL)</div>
                                    <input type="number" step="0.1" class="input-field" id="calcium" placeholder="‰æãÂ¶ÇÔºö9.5">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">Ë°ÄÁ¥ÖËõãÁôΩ (g/dL)</div>
                                    <input type="number" step="0.1" class="input-field" id="hemoglobin" placeholder="‰æãÂ¶ÇÔºö11.0">
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <div class="input-label">Êó•Êúü</div>
                                <input type="date" class="input-field" id="blood-date">
                                <div class="input-hint">Ë´ãËº∏ÂÖ•Ë°ÄÊ∂≤Ê™¢Ê∏¨ÁöÑÊó•Êúü</div>
                            </div>
                            
                            <button type="button" class="save-btn" id="save-blood-btn">ÂÑ≤Â≠òÊï∏Êìö</button>
                        </form>
                        
                        <div class="data-history">
                            <div class="history-title">Ê≠∑Âè≤Ë®òÈåÑ</div>
                            <div class="chart-container">
                                <div class="chart-placeholder">
                                    Ë°ÄÊ∂≤Êï∏ÂÄºË∂®Âã¢Âúñ (Ê≠§ËôïÁÇ∫Á§∫ÊÑèÔºåÂØ¶ÈöõÊáâÁî®Â∞áÈ°ØÁ§∫ÂúñË°®)
                                </div>
                            </div>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Êó•Êúü</th>
                                        <th>Ë°ÄÈâÄ</th>
                                        <th>Ë°ÄÁ£∑</th>
                                        <th>Ë°ÄÈà£</th>
                                        <th>Ë°ÄÁ¥ÖËõãÁôΩ</th>
                                    </tr>
                                </thead>
                                <tbody id="blood-history">
                                    <tr>
                                        <td>2023/03/20</td>
                                        <td>5.8 mEq/L</td>
                                        <td>4.2 mg/dL</td>
                                        <td>9.4 mg/dL</td>
                                        <td>10.8 g/dL</td>
                                    </tr>
                                    <tr>
                                        <td>2023/02/20</td>
                                        <td>5.5 mEq/L</td>
                                        <td>4.5 mg/dL</td>
                                        <td>9.2 mg/dL</td>
                                        <td>11.0 g/dL</td>
                                    </tr>
                                    <tr>
                                        <td>2023/01/20</td>
                                        <td>5.3 mEq/L</td>
                                        <td>4.8 mg/dL</td>
                                        <td>9.5 mg/dL</td>
                                        <td>10.5 g/dL</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ÈÄèÊûêÊï∏ÊìöÈ†ÅÁ±§ -->
                <div id="dialysis-tab" class="tab-content">
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-clipboard-list"></i>
                                ÈÄèÊûêÊ≤ªÁôÇÊï∏Êìö
                            </div>
                            <div class="add-btn" id="add-dialysis-btn">
                                <i class="fas fa-plus"></i> Êñ∞Â¢û
                            </div>
                        </div>
                        
                        <form id="dialysis-form">
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">ÈÄèÊûêÂâçÈ´îÈáç (kg)</div>
                                    <input type="number" step="0.1" class="input-field" id="pre-weight" placeholder="‰æãÂ¶ÇÔºö81.5">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">ÈÄèÊûêÂæåÈ´îÈáç (kg)</div>
                                    <input type="number" step="0.1" class="input-field" id="post-weight" placeholder="‰æãÂ¶ÇÔºö79.0">
                                </div>
                            </div>
                            
                            <div class="dual-input">
                                <div class="input-group">
                                    <div class="input-label">ÈÄèÊûêÊôÇÈñì (Â∞èÊôÇ)</div>
                                    <input type="number" step="0.5" class="input-field" id="dialysis-time" placeholder="‰æãÂ¶ÇÔºö4.0">
                                </div>
                                <div class="input-group">
                                    <div class="input-label">Ë∂ÖÊøæÈáè (L)</div>
                                    <input type="number" step="0.1" class="input-field" id="uf-volume" placeholder="‰æãÂ¶ÇÔºö2.5">
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <div class="input-label">ÈÄèÊûêÊó•Êúü</div>
                                <input type="date" class="input-field" id="dialysis-date">
                                <div class="input-hint">Ë´ãËº∏ÂÖ•ÈÄèÊûêÊ≤ªÁôÇÁöÑÊó•Êúü</div>
                            </div>
                            
                            <div class="input-group">
                                <div class="input-label">ÂÇôË®ª</div>
                                <textarea class="input-field" id="dialysis-notes" rows="3" placeholder="‰æãÂ¶ÇÔºö‰ªäÊó•ÊÑüË¶∫ËâØÂ•ΩÔºåÁÑ°ÁâπÊÆä‰∏çÈÅ©"></textarea>
                            </div>
                            
                            <button type="button" class="save-btn" id="save-dialysis-btn">ÂÑ≤Â≠òÊï∏Êìö</button>
                        </form>
                        
                        <div class="data-history">
                            <div class="history-title">Ê≠∑Âè≤Ë®òÈåÑ</div>
                            <div class="chart-container">
                                <div class="chart-placeholder">
                                    È´îÈáçËÆäÂåñË∂®Âã¢Âúñ (Ê≠§ËôïÁÇ∫Á§∫ÊÑèÔºåÂØ¶ÈöõÊáâÁî®Â∞áÈ°ØÁ§∫ÂúñË°®)
                                </div>
                            </div>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Êó•Êúü</th>
                                        <th>ÈÄèÊûêÂâçÈ´îÈáç</th>
                                        <th>ÈÄèÊûêÂæåÈ´îÈáç</th>
                                        <th>Ë∂ÖÊøæÈáè</th>
                                        <th>ÊôÇÈñì</th>
                                    </tr>
                                </thead>
                                <tbody id="dialysis-history">
                                    <tr>
                                        <td>2023/03/25</td>
                                        <td>81.3 kg</td>
                                        <td>79.2 kg</td>
                                        <td>2.1 L</td>
                                        <td>4.0 Â∞èÊôÇ</td>
                                    </tr>
                                    <tr>
                                        <td>2023/03/23</td>
                                        <td>81.2 kg</td>
                                        <td>79.4 kg</td>
                                        <td>1.8 L</td>
                                        <td>4.0 Â∞èÊôÇ</td>
                                    </tr>
                                    <tr>
                                        <td>2023/03/21</td>
                                        <td>82.1 kg</td>
                                        <td>79.8 kg</td>
                                        <td>2.3 L</td>
                                        <td>4.0 Â∞èÊôÇ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Â∫ïÈÉ®Ê®ôÁ±§Ê¨Ñ -->
        <div class="tab-bar">
            <a href="main.html" class="tab-item">
                <i class="fas fa-home"></i>
                <span>È¶ñÈ†Å</span>
            </a>
            <a href="quiz-selector.html" class="tab-item">
                <i class="fas fa-gamepad"></i>
                <span>ÈÅäÊà≤</span>
            </a>
            <a href="learning-resources.html" class="tab-item">
                <i class="fas fa-book-open"></i>
                <span>Â≠∏Áøí</span>
            </a>
            <a href="dialysis-schedule.html" class="tab-item">
                <i class="fas fa-calendar-alt"></i>
                <span>ÊéíÁ®ã</span>
            </a>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        // Êõ¥Êñ∞ÁãÄÊÖãÊ¨ÑÊôÇÈñì
        function updateStatusBarTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('status-time').textContent = `${hours}:${minutes}`;
        }
        
        // È†ÅÁ±§ÂàáÊèõÂäüËÉΩ
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab-item');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.dataset.tab;
                    
                    // ÁßªÈô§ÊâÄÊúâ active È°û
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Ê∑ªÂä† active È°ûÂà∞Áï∂ÂâçÈÅ∏‰∏≠ÁöÑÈ†ÅÁ±§
                    tab.classList.add('active');
                    document.getElementById(`${targetTab}-tab`).classList.add('active');
                });
            });
        }
        
        // Êï∏Êìö‰øùÂ≠òÂäüËÉΩ
        function setupFormHandlers() {
            // ÁîüÁêÜÊåáÊ®ôË°®ÂñÆ
            document.getElementById('save-vitals-btn').addEventListener('click', function() {
                const systolic = document.getElementById('systolic').value;
                const diastolic = document.getElementById('diastolic').value;
                const heartRate = document.getElementById('heart-rate').value;
                const weight = document.getElementById('weight').value;
                const datetime = document.getElementById('vitals-datetime').value || new Date().toISOString();
                
                // Á∞°ÂñÆÈ©óË≠â
                if (!systolic || !diastolic || !heartRate || !weight) {
                    alert('Ë´ãÂ°´ÂØ´ÊâÄÊúâÂøÖÂ°´Ê¨Ñ‰Ωç');
                    return;
                }
                
                // Ê®°Êì¨Êï∏Êìö‰øùÂ≠ò (ÂØ¶ÈöõÊáâÁî®‰∏≠Êáâ‰øùÂ≠òÂà∞Ë≥áÊñôÂ∫´)
                alert('ÁîüÁêÜÊåáÊ®ôÊï∏ÊìöÂ∑≤ÂÑ≤Â≠òÔºÅ');
                
                // Ê∏ÖÁ©∫Ë°®ÂñÆ
                document.getElementById('vitals-form').reset();
                
                // Âú®Ë°®Ê†º‰∏≠Ê∑ªÂä†Êñ∞Ë®òÈåÑ (Ê®°Êì¨)
                const formattedDate = new Date(datetime).toLocaleString('zh-TW', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const newRow = `
                    <tr>
                        <td>${formattedDate}</td>
                        <td>${systolic}/${diastolic} mmHg</td>
                        <td>${heartRate} bpm</td>
                        <td>${weight} kg</td>
                    </tr>
                `;
                
                document.getElementById('vitals-history').innerHTML = newRow + document.getElementById('vitals-history').innerHTML;
            });
            
            // Ë°ÄÊ∂≤Ê™¢Ê∏¨Ë°®ÂñÆ
            document.getElementById('save-blood-btn').addEventListener('click', function() {
                const potassium = document.getElementById('potassium').value;
                const phosphorus = document.getElementById('phosphorus').value;
                const calcium = document.getElementById('calcium').value;
                const hemoglobin = document.getElementById('hemoglobin').value;
                const date = document.getElementById('blood-date').value || new Date().toISOString().split('T')[0];
                
                // Á∞°ÂñÆÈ©óË≠â
                if (!potassium || !phosphorus || !calcium || !hemoglobin || !date) {
                    alert('Ë´ãÂ°´ÂØ´ÊâÄÊúâÂøÖÂ°´Ê¨Ñ‰Ωç');
                    return;
                }
                
                // Ê®°Êì¨Êï∏Êìö‰øùÂ≠ò
                alert('Ë°ÄÊ∂≤Ê™¢Ê∏¨Êï∏ÊìöÂ∑≤ÂÑ≤Â≠òÔºÅ');
                
                // Ê∏ÖÁ©∫Ë°®ÂñÆ
                document.getElementById('blood-form').reset();
                
                // Âú®Ë°®Ê†º‰∏≠Ê∑ªÂä†Êñ∞Ë®òÈåÑ (Ê®°Êì¨)
                const formattedDate = new Date(date).toLocaleDateString('zh-TW');
                
                const newRow = `
                    <tr>
                        <td>${formattedDate}</td>
                        <td>${potassium} mEq/L</td>
                        <td>${phosphorus} mg/dL</td>
                        <td>${calcium} mg/dL</td>
                        <td>${hemoglobin} g/dL</td>
                    </tr>
                `;
                
                document.getElementById('blood-history').innerHTML = newRow + document.getElementById('blood-history').innerHTML;
            });
            
            // ÈÄèÊûêÊï∏ÊìöË°®ÂñÆ
            document.getElementById('save-dialysis-btn').addEventListener('click', function() {
                const preWeight = document.getElementById('pre-weight').value;
                const postWeight = document.getElementById('post-weight').value;
                const dialysisTime = document.getElementById('dialysis-time').value;
                const ufVolume = document.getElementById('uf-volume').value;
                const date = document.getElementById('dialysis-date').value || new Date().toISOString().split('T')[0];
                
                // Á∞°ÂñÆÈ©óË≠â
                if (!preWeight || !postWeight || !dialysisTime || !date) {
                    alert('Ë´ãÂ°´ÂØ´ÊâÄÊúâÂøÖÂ°´Ê¨Ñ‰Ωç');
                    return;
                }
                
                // Ê®°Êì¨Êï∏Êìö‰øùÂ≠ò
                alert('ÈÄèÊûêÊ≤ªÁôÇÊï∏ÊìöÂ∑≤ÂÑ≤Â≠òÔºÅ');
                
                // Ê∏ÖÁ©∫Ë°®ÂñÆ
                document.getElementById('dialysis-form').reset();
                
                // Âú®Ë°®Ê†º‰∏≠Ê∑ªÂä†Êñ∞Ë®òÈåÑ (Ê®°Êì¨)
                const formattedDate = new Date(date).toLocaleDateString('zh-TW');
                const calculatedUf = ufVolume || (preWeight - postWeight).toFixed(1);
                
                const newRow = `
                    <tr>
                        <td>${formattedDate}</td>
                        <td>${preWeight} kg</td>
                        <td>${postWeight} kg</td>
                        <td>${calculatedUf} L</td>
                        <td>${dialysisTime} Â∞èÊôÇ</td>
                    </tr>
                `;
                
                document.getElementById('dialysis-history').innerHTML = newRow + document.getElementById('dialysis-history').innerHTML;
            });
        }
        
        // È†ÅÈù¢ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Êõ¥Êñ∞ÊôÇÈñì
            updateStatusBarTime();
            setInterval(updateStatusBarTime, 60000);
            
            // Ë®≠ÁΩÆÈ†ÅÁ±§ÂäüËÉΩ
            setupTabs();
            
            // Ë®≠ÁΩÆË°®ÂñÆËôïÁêÜÁ®ãÂ∫è
            setupFormHandlers();
            
            // Â¢ûÂä†ÊñáÂ≠óÂ§ßÂ∞èÂäüËÉΩ
            document.getElementById('increase-text').addEventListener('click', function() {
                document.body.classList.toggle('large-text');
                
                if (document.body.classList.contains('large-text')) {
                    document.documentElement.style.setProperty('--font-size-multiplier', '1.2');
                } else {
                    document.documentElement.style.setProperty('--font-size-multiplier', '1');
                }
            });
            
            // È´òÂ∞çÊØîÂ∫¶Ê®°Âºè
            document.getElementById('high-contrast').addEventListener('click', function() {
                document.body.classList.toggle('high-contrast');
                
                if (document.body.classList.contains('high-contrast')) {
                    document.documentElement.style.setProperty('--ios-text-primary', '#000000');
                    document.documentElement.style.setProperty('--ios-text-secondary', '#222222');
                    document.documentElement.style.setProperty('--ios-primary', '#0056b3');
                    document.documentElement.style.setProperty('--ios-background', '#ffffff');
                } else {
                    document.documentElement.style.setProperty('--ios-text-primary', '');
                    document.documentElement.style.setProperty('--ios-text-secondary', '');
                    document.documentElement.style.setProperty('--ios-primary', '');
                    document.documentElement.style.setProperty('--ios-background', '');
                }
            });
        });
    </script>
</body>
</html> 